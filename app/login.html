<!doctype html>
<html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ingresar â€” ğŸ“šPEVE</title>
<link rel="stylesheet" href="../assets/style.css">
<script defer src="../assets/app.js"></script>
<meta name="theme-color" content="#0b0f14">
</head>
<body data-home="../index.html">

<header class="header">
  <div class="logo">
    <span class="badge">ğŸ“šPEVE</span>
    <span class="title">Plataforma ExÃ¡menes de ValidaciÃ³n de Estudios</span>
  </div>
  <div class="row">
    <button class="toggle" data-action="fs-dec">Aâˆ’</button>
    <button class="toggle" data-action="fs-inc">A+</button>
    <button class="toggle" data-action="contrast">ğŸŒ“ Alto contraste</button>
  </div>
</header>

<main>
  <h2>ğŸ” Ingreso</h2>
  <p class="notice">Selecciona tu perfil para entrar a la plataforma PEVE.</p>
  <div class="grid">
    <div class="card">
      <h3>ğŸ‘©â€ğŸ“ Estudiante</h3>
      <p>Accede a simulaciones de exÃ¡menes, guÃ­as y recursos de estudio.</p>
      <button class="btn" onclick="setRoleAndGo('student','student.html')">Entrar</button>
    </div>
    <div class="card">
      <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Apoderado/a</h3>
      <p>Revisa el progreso y recursos para acompaÃ±ar a tu estudiante.</p>
      <button class="btn" onclick="setRoleAndGo('guardian','guardian.html')">Entrar</button>
    </div>
    <div class="card">
      <h3>ğŸ‘©â€ğŸ« Docente</h3>
      <p>Panel con estadÃ­sticas, OA y acceso a recursos docentes.</p>
      <button class="btn" onclick="setRoleAndGo('teacher','teacher.html')">Entrar</button>
    </div>
    <div class="card">
      <h3>ğŸ› ï¸ Administrador</h3>
      <p>ConfiguraciÃ³n avanzada y conexiÃ³n con Google Sheets (Apps Script).</p>
      <button class="btn red" onclick="setRoleAndGo('admin','admin.html')">Entrar</button>
    </div>
  </div>
</main>
<script>
  async function setRoleAndGo(role, target){
    // Login DEMO: elige automÃ¡ticamente un usuario de ejemplo segÃºn el rol
    try{
      const res = await fetch('../data/users.json');
      const users = await res.json();
      let user = users.find(u => u.role === role);
      if(!user){
        // Fallback: crea un usuario temporal
        user = { id: role + '_demo', name: 'Usuario demo ' + role, role, email: '' };
      }
      if(typeof setSession === 'function'){
        setSession(user);
      }else{
        localStorage.setItem('peve.session', JSON.stringify(user));
      }
    }catch(e){
      console.warn('No se pudo cargar users.json, usando sesiÃ³n mÃ­nima.', e);
      const user = { id: role + '_demo', name: 'Usuario demo ' + role, role, email: '' };
      try{ localStorage.setItem('peve.session', JSON.stringify(user)); }catch(_){}
    }
    // Rol actual (por compatibilidad con versiones anteriores)
    try{ localStorage.setItem('peve.role', role); }catch(e){}
    location.href = target;
  }
</script>


<footer class="footer">
  <div>ğŸ“šPEVE - Plataforma ExÃ¡menes de ValidaciÃ³n de Estudios</div>
  <div>ğŸ“šNEOTECH EDULAB SpA. - Todos los derechos reservados - Prohibida su copia y/o reproduccion</div>
  <div>ğŸ› ï¸Creado por:</div>
  <div>ğŸ‘©â€ğŸ«BelÃ©n AcuÃ±a PÃ©rez â€” ğŸ“§ belen.acpe@gmail.com Â· ğŸ“ +56 9 6266 4960</div>
  <div>ğŸ‘¨â€ğŸ’»Francisco Pinto â€” ğŸ“§ franciscoandresp@gmail.com Â· ğŸ“ +56 9 2002 7992</div>
  <div>Hecho con â¤ï¸ para el Liceo Bicentenario de Excelencia Polivalente San NicolÃ¡s</div>
 </footer>

</body></html>
