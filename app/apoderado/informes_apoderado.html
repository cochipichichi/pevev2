<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<title>ğŸ“Š Informes Apoderado/a â€“ ğŸ“šPEVE</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../../assets/css/style.css" rel="stylesheet"/>
<link href="../../assets/css/theme.css" rel="stylesheet"/></head>
<body class="theme-dark">
<header class="topbar">
<div class="topbar-left">
<div class="logo-circle">ğŸ“š</div>
<div class="brand-text">
<span class="brand-name" data-i18n="c.peve_a61b37fe">PEVE</span>
<span class="brand-subtitle" data-i18n="p.app__apoderado__informes_apoderado.0001">Informes para apoderado/a</span>
</div>
</div>
<nav aria-label="NavegaciÃ³n principal" class="topbar-nav" data-i18n-aria-label="c.attr.aria-label.navegaciÃ³n_principal_86058c13">
<a class="nav-link" data-i18n="nav.inicio" href="../../index.html">Inicio</a>
<a class="nav-link" data-i18n="p.app__apoderado__informes_apoderado.0002" href="../dashboard_apoderado.html">Panel Apoderado/a</a>
<a class="nav-link" data-i18n="nav.niveles" href="../../pages/niveles.html">Niveles</a>
<a class="nav-link" data-i18n="nav.asignaturas" href="../../pages/asignaturas.html">Asignaturas</a>
<a class="nav-link" data-i18n="nav.perfiles" href="../../pages/perfiles.html">Perfiles</a>
<a class="nav-link" data-i18n="nav.accesibilidad" href="../../pages/accesibilidad.html">Accesibilidad</a>
<a class="nav-link" data-i18n="nav.acerca" href="../../pages/acerca.html">Acerca de</a>
</nav>
<div aria-label="Controles de accesibilidad" class="accessibility-toolbar" data-i18n-aria-label="c.attr.aria-label.controles_de_accesibilidad_e1513252">
<button class="access-btn" data-action="home" data-home="../../index.html" data-i18n-title="c.attr.title.ir_al_inicio_115d499a" title="Ir al inicio">ğŸ </button>
<button class="access-btn" data-action="narrator" data-i18n-title="c.attr.title.leer_el_contenido_de_la_pÃ¡gina_b153cdac" title="Leer el contenido de la pÃ¡gina">ğŸ—£ï¸</button>
<button class="access-btn" data-action="toggle-theme" data-i18n-title="c.attr.title.cambiar_tema_clarooscuro_c39e5dae" title="Cambiar tema claro/oscuro">ğŸŒ“</button>
<button class="access-btn" data-action="font-inc" data-i18n-title="c.attr.title.aumentar_tamaÃ±o_de_letra_e7bb9209" title="Aumentar tamaÃ±o de letra">A+</button>
<button class="access-btn" data-action="font-dec" data-i18n-title="c.attr.title.disminuir_tamaÃ±o_de_letra_75a8c21b" title="Disminuir tamaÃ±o de letra">Aâˆ’</button>
<button class="access-btn" data-action="lang" data-i18n-title="c.attr.title.cambiar_idioma_esenfr_9e345c96" title="Cambiar idioma ES/EN/FR">ğŸŒ</button>
<button class="access-btn" data-action="guide" data-i18n-title="c.attr.title.abrir_guÃ­a_paso_a_paso_09b564da" title="Abrir guÃ­a paso a paso">ğŸ§ </button>
<button class="access-btn" data-action="search" data-i18n-title="c.attr.title.buscar_en_esta_pÃ¡gina_90fa8efb" title="Buscar en esta pÃ¡gina">ğŸ”</button>
</div>
</header>
<main class="container">
<section class="hero">
<h1 data-i18n="p.app__apoderado__informes_apoderado.0003">ğŸ“Š Informe de avance (Apoderado/a)</h1>
<p class="note">
        MÃ³dulo pensado para que <strong data-i18n="p.app__apoderado__informes_apoderado.0004" id="guardian-name-inline">el/la apoderado/a</strong> revise un resumen del avance de
        <strong data-i18n="p.app__apoderado__informes_apoderado.0005" id="guardian-student-name-inline">su estudiante</strong> y pueda exportarlo a PDF.
      </p>
<p class="note">
        Estudiante: <strong id="guardian-student-name-hero">â€”</strong> Â· Nivel:
        <strong id="guardian-student-level-hero">â€”</strong> Â· Llamado:
        <strong id="guardian-student-call-hero">â€”</strong>
</p>
<div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:1rem;">
<div class="card">
<h3 data-i18n="p.app__apoderado__informes_apoderado.0006">ğŸ‘¤ Estudiante</h3>
<label class="small" data-i18n="p.app__apoderado__informes_apoderado.0007" for="g-run">RUN del estudiante</label>
<input class="input" data-i18n-placeholder="p.app__apoderado__informes_apoderado.0024" id="g-run" placeholder="Ej: 12.345.678-9"/>
<label class="small" data-i18n="p.app__apoderado__informes_apoderado.0008" for="g-idpeve" style="margin-top:.5rem;">ID PEVE (opcional)</label>
<input class="input" data-i18n-placeholder="p.app__apoderado__informes_apoderado.0025" id="g-idpeve" placeholder="Ej: STU-2025-0001"/>
<button class="btn btn-solid" data-i18n="p.app__apoderado__informes_apoderado.0009" id="g-load" style="margin-top:.75rem;width:100%;">ğŸ”„ Cargar informe</button>
<p class="small note" data-i18n="p.app__apoderado__informes_apoderado.0010" id="g-status" style="margin-top:.6rem;">Listo.</p>
</div>
<div class="card">
<h3 data-i18n="p.app__apoderado__informes_apoderado.0011">ğŸ“Œ Resumen</h3>
<div class="small" data-i18n="p.app__apoderado__informes_apoderado.0012">Ãšltima actualizaciÃ³n</div>
<div id="r-updated" style="font-weight:700;margin:.25rem 0 0;">â€”</div>
<div class="small" data-i18n="p.app__apoderado__informes_apoderado.0013" style="margin-top:.65rem;">Progreso estimado</div>
<div class="progress-bar" style="margin-top:.35rem;">
<div class="progress-fill" id="r-progress" style="width:0%;"></div>
</div>
<div class="small" data-i18n="p.app__apoderado__informes_apoderado.0014" id="r-progress-text" style="margin-top:.35rem;">0%</div>
<button class="btn btn-ghost" data-i18n="p.app__apoderado__informes_apoderado.0015" id="r-print" style="margin-top:.75rem;width:100%;">ğŸ–¨ï¸ Exportar a PDF</button>
</div>
<div class="card">
<h3 data-i18n="p.app__apoderado__informes_apoderado.0016">âœ… Indicadores</h3>
<ul class="list">
<li><strong data-i18n="p.app__apoderado__informes_apoderado.0017">PEVE:</strong> <span id="k-peve">â€”</span></li>
<li><strong data-i18n="p.app__apoderado__informes_apoderado.0018">DIA:</strong> <span id="k-dia">â€”</span></li>
<li><strong data-i18n="p.app__apoderado__informes_apoderado.0019">KPSI:</strong> <span id="k-kpsi">â€”</span></li>
</ul>
<p class="small note" data-i18n="p.app__apoderado__informes_apoderado.0020">Estos indicadores se completan cuando el Apps Script provee datos.</p>
</div>
</div>
</section>
<section class="section">
<article class="card">
<h2 data-i18n="p.app__apoderado__informes_apoderado.0021">ğŸ“„ Detalle (modo demo / real)</h2>
<div class="note small" data-i18n="p.app__apoderado__informes_apoderado.0022">Si estÃ¡s en modo demo, este contenido muestra un ejemplo. Si estÃ¡s conectado, se reemplaza con datos reales.</div>
<div id="r-detail" style="margin-top:1rem;">
<div class="note" data-i18n="p.app__apoderado__informes_apoderado.0023">No hay datos cargados aÃºn.</div>
</div>
</article>
</section>
<section class="section">
<article aria-label="InformaciÃ³n de accesibilidad de la plataforma PEVE" class="card accessibility-card" data-i18n-aria-label="c.attr.aria-label.informaciÃ³n_de_accesibilidad_de_la_plata_fca079ae">
<h2 data-i18n="c.accesibilidad_fd501df9">ğŸ§© Accesibilidad</h2>
<p class="note" data-i18n="c.controles__inicio___lee_todo_el_contenid_573aa174">ğŸ› ï¸ Controles: ğŸ  inicio Â· ğŸ—£ï¸ lee todo el contenido de la pÃ¡gina Â· ğŸŒ“ alto contraste Â· A+ / Aâˆ’ tamaÃ±o de letra Â· ğŸŒ ES / EN / FR (traducciÃ³n del sitio) Â· ğŸ§  guÃ­a paso a paso Â· ğŸ” lupa.</p>
</article>
</section>
</main>
<footer class="footer small"></footer>
<script src="../../assets/api.js"></script>

<script src="../../assets/js/footer.js"></script>
<script>
    (function(){
      const status = document.getElementById('g-status');
      const detail = document.getElementById('r-detail');
      const updated = document.getElementById('r-updated');
      const progressFill = document.getElementById('r-progress');
      const progressText = document.getElementById('r-progress-text');
      const kpeve = document.getElementById('k-peve');
      const kdia = document.getElementById('k-dia');
      const kkpsi = document.getElementById('k-kpsi');

      function setDemo(){
        const now = new Date();
        updated.textContent = now.toLocaleString();
        const pct = 42;
        progressFill.style.width = pct+'%';
        progressText.textContent = pct+'%';
        kpeve.textContent = 'En curso';
        kdia.textContent = 'Pendiente';
        kkpsi.textContent = 'Inicial';
        detail.innerHTML = `
          <div class="card" style="margin-top:.75rem;">
            <h3>ğŸ“Œ RecomendaciÃ³n (demo)</h3>
            <p>Avanza con rutinas cortas (15â€“25 min), repasa temarios oficiales y registra progreso semanal. Si hay ansiedad o barreras de acceso, coordina apoyos con PIE.</p>
          </div>
          <div class="card" style="margin-top:.75rem;">
            <h3>ğŸ§¾ PrÃ³ximos pasos</h3>
            <ol>
              <li>Revisar temarios del curso del estudiante.</li>
              <li>Practicar con evaluaciones formativas (DIA) si corresponde.</li>
              <li>Registrar KPSI inicial y comparar en 4 semanas.</li>
            </ol>
          </div>
        `;
      }

      async function loadReal(run, idpeve){
        // acciÃ³n sugerida para Apps Script (puedes implementarla en tu backend)
        // action: "guardianReport"
        const payload = { run, idPeve: idpeve };
        const res = await pevePost("guardianReport", payload);
        // Espera un formato flexible:
        // { ok:true, updated:"...", progress:0-100, k:{peve,dia,kpsi}, detailHtml:"..." }
        if(!res || !res.ok) throw new Error(res && res.error ? res.error : "Respuesta invÃ¡lida");
        updated.textContent = res.updated || new Date().toLocaleString();
        const pct = Math.max(0, Math.min(100, Number(res.progress||0)));
        progressFill.style.width = pct+'%';
        progressText.textContent = pct+'%';
        kpeve.textContent = (res.k && res.k.peve) || 'â€”';
        kdia.textContent = (res.k && res.k.dia) || 'â€”';
        kkpsi.textContent = (res.k && res.k.kpsi) || 'â€”';
        detail.innerHTML = res.detailHtml || '<div class="note">Sin detalle.</div>';
      }

      document.getElementById('g-load').addEventListener('click', async ()=>{
        const run = document.getElementById('g-run').value.trim();
        const idp = document.getElementById('g-idpeve').value.trim();
        status.textContent = 'Cargando...';
        try{
          if(!run && !idp){
            status.textContent = 'Ingresa RUN o ID PEVE.';
            return;
          }
          await loadReal(run, idp);
          status.textContent = 'Informe cargado.';
        }catch(e){
          status.textContent = 'Modo demo: ' + (e && e.message ? e.message : 'No hay conexiÃ³n');
          setDemo();
        }
      });

      document.getElementById('r-print').addEventListener('click', ()=> window.print());
    })();
  </script>
<script defer="" src="../../assets/js/guardian-context.js"></script>
<script src="../../assets/js/accessibility.js"></script></body>
</html>
