
<!DOCTYPE html>

<html lang="es">
<head>
<meta content="#0c0f10" name="theme-color"/>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>ğŸ§ª Quiz OA2 â€” Evidencias de la EvoluciÃ³n</title>
<link href="../style.css" rel="stylesheet"/>
<script defer="" src="../../../../../assets/app.js"></script>
<script defer="" src="../../../../../assets/api.js"></script>
<script type="module">
    import { SHEETS_WRITE_ENDPOINT } from "../js/config.js";
    window.__SHEETS_ENDPOINT = SHEETS_WRITE_ENDPOINT;
  </script>
</head>
<body>
<nav class="controls">
<span class="control-title">ğŸ› ï¸ Controles:</span>
<a class="control-btn" href="../index.html">ğŸ </a>
<button class="control-btn" onclick="handleSpeak()">ğŸ—£ï¸</button>
<div class="theme-switcher">
<button aria-label="Cambiar tema" class="control-btn" id="themeBtn" onclick="toggleThemeMenu()" title="Temas (Alt+T)">ğŸŒ“</button>
<div aria-label="Selector de tema" class="theme-menu hidden" id="themeMenu" role="menu">
<button onclick="setTheme('light')" role="menuitem">â˜€ï¸ Claro</button>
<button onclick="setTheme('dark')" role="menuitem">ğŸŒ™ Oscuro</button>
<button onclick="setTheme('high')" role="menuitem">âš¡ Alto contraste</button>
<button onclick="setTheme('sepia')" role="menuitem">ğŸ“œ Sepia</button>
</div>
</div>
<button class="control-btn" onclick="fontDelta(1)">A+</button>
<button class="control-btn" onclick="fontDelta(-1)">Aâˆ’</button>
<button class="control-btn" onclick="toggleLang(this)">ğŸŒ</button>
<button class="control-btn" onclick="toggleGuide(true)">ğŸ§ </button>
<button class="control-btn" onclick="toggleRuler(this)">ğŸ”</button>
<span class="spacer"></span>
<button class="control-btn" onclick="handleStop()">â¹</button>
</nav>
<main class="section" id="intro">
<h1>ğŸ§ª Quiz OA2</h1>
<p>Selecciona la alternativa correcta. Al terminar, revisa tu puntaje.</p>
<div class="card" id="quizBox"></div>
<div class="btn-row" style="margin-top:1rem">
<button class="btn" onclick="grade()">âœ… Revisar</button>
<button class="btn" onclick="location.reload()">ğŸ”„ Reiniciar</button>
</div>
<p id="score" style="margin-top:1rem;font-weight:700"></p>
<!-- Bloque de accesibilidad comÃºn PEVE -->
<section class="section">
<article aria-label="InformaciÃ³n de accesibilidad de la plataforma PEVE" class="card accessibility-card">
<h2>ğŸ§© Accesibilidad</h2>
<p class="note">
      ğŸ› ï¸ Controles: ğŸ  inicio Â· ğŸ—£ï¸ lee todo el contenido de la pÃ¡gina Â· ğŸŒ“ alto contraste Â· A+ / Aâˆ’ tamaÃ±o de letra Â·
      ğŸŒ ES / EN / FR (traducciÃ³n del sitio) Â· ğŸ§  guÃ­a paso a paso Â· ğŸ” lupa.
    </p>
</article>
</section>
</main>
<div class="modal" id="guideModal"><div class="box"><span class="close" onclick="toggleGuide(false)">âœ–</span><h3>ğŸ§  GuÃ­a</h3><p>Recuerda leer bien cada opciÃ³n; busca pistas en palabras clave.</p></div></div>
<div class="ruler" id="ruler"></div>
<script src="../js/script.js"></script>
<script>
  const questions = [
    // base 10 + extras to 25
    {q:'Â¿CuÃ¡l de las siguientes es una evidencia directa de la evoluciÃ³n?', a:['Registro fÃ³sil','AnalogÃ­a funcional','Aprendizaje cultural','Homeostasis'], c:0},
    {q:'Las estructuras homÃ³logas indicanâ€¦', a:['Origen evolutivo comÃºn','Misma funciÃ³n, distinto origen','Convergencia cultural','MutaciÃ³n puntual idÃ©ntica'], c:0},
    {q:'SegÃºn la selecciÃ³n natural, Â¿quÃ© ocurre primero?', a:['SobreproducciÃ³n','SelecciÃ³n','AdaptaciÃ³n fija','ExtinciÃ³n'], c:0},
    {q:'La variaciÃ³n heredable en una poblaciÃ³nâ€¦', a:['Es materia prima para la selecciÃ³n','Impide la evoluciÃ³n','Elimina adaptaciones','Solo ocurre en plantas'], c:0},
    {q:'El aporte clave de Wallace fueâ€¦', a:['Co-desarrollar la idea de selecciÃ³n natural','Descubrir la doble hÃ©lice','Proponer herencia de caracteres adquiridos','Negar la evoluciÃ³n'], c:0},
    {q:'La embriologÃ­a comparada revelaâ€¦', a:['Patrones de desarrollo compartidos','Solo similitudes culturales','Diferencias sin relaciÃ³n','Ãšnicamente rasgos adultos'], c:0},
    {q:'Las secuencias de ADN permitenâ€¦', a:['Medir parentesco evolutivo','Crear fÃ³siles','Eliminar mutaciones','Predecir comportamiento social'], c:0},
    {q:'Un ejemplo de especiaciÃ³n alopÃ¡trica esâ€¦', a:['Poblaciones aisladas por barreras geogrÃ¡ficas','Intercambio gÃ©nico continuo','Misma zona sin aislamiento','Mutaciones idÃ©nticas simultÃ¡neas'], c:0},
    {q:'La adaptaciÃ³n se define comoâ€¦', a:['Rasgo que aumenta la aptitud en un ambiente','Cualquier rasgo vistoso','Cambio aleatorio sin efecto','Aprendizaje durante la vida'], c:0},
    {q:'La selecciÃ³n natural actÃºa sobreâ€¦', a:['Fenotipos','Genes individualmente','Ecosistemas','Ãtomos'], c:0},
  ,
    {"q": "Â¿QuÃ© indica una alta similitud en secuencias de ADN entre dos especies?", "a": ["Parentesco evolutivo cercano", "No tienen relaciÃ³n", "AnalogÃ­a funcional", "EvoluciÃ³n convergente segura"], "c": 0},
    {"q": "Â¿QuÃ© tÃ©rmino describe el surgimiento de nuevas especies?", "a": ["EspeciaciÃ³n", "HibridaciÃ³n", "Homeostasis", "FotosÃ­ntesis"], "c": 0},
    {"q": "Â¿CuÃ¡l NO es evidencia de evoluciÃ³n?", "a": ["Preferencias culturales", "Registro fÃ³sil", "HomologÃ­as", "ADN"], "c": 0},
    {"q": "En selecciÃ³n natural, Â¿sobre quÃ© actÃºa la selecciÃ³n directamente?", "a": ["Fenotipo", "Genotipo aislado", "Especie entera al mismo tiempo", "Bioma"], "c": 0},
    {"q": "Un ala de murciÃ©lago y un brazo humano sonâ€¦", "a": ["HomÃ³logos", "AnÃ¡logos", "Sin relaciÃ³n", "Ã“rganos vestigiales"], "c": 0},
    {"q": "Las alas de aves y mariposas con misma funciÃ³n pero distinto origen sonâ€¦", "a": ["AnÃ¡logas", "HomÃ³logas", "Vestigiales", "IdÃ©nticas"], "c": 0},
    {"q": "Un Ã³rgano vestigial esâ€¦", "a": ["Resto anatÃ³mico con funciÃ³n reducida", "Estructura completamente nueva", "Sin valor evidencial", "Producto de aprendizaje"], "c": 0},
    {"q": "La variaciÃ³n heredable surge porâ€¦", "a": ["Mutaciones y recombinaciÃ³n", "Ejercicio fÃ­sico", "Idioma", "Clima solamente"], "c": 0},
    {"q": "Un cuello mÃ¡s largo en jirafas por ventaja alimenticia es ejemplo deâ€¦", "a": ["SelecciÃ³n direccional", "SelecciÃ³n estabilizadora", "SelecciÃ³n disruptiva", "Deriva genÃ©tica"], "c": 0},
    {"q": "La deriva genÃ©tica esâ€¦", "a": ["Cambio aleatorio en frecuencias gÃ©nicas", "SelecciÃ³n siempre positiva", "MutaciÃ³n dirigida", "Prueba de anÃ¡logos"], "c": 0},
    {"q": "El aislamiento reproductivo evitaâ€¦", "a": ["Flujo gÃ©nico entre poblaciones", "Mutaciones", "SelecciÃ³n natural", "Adaptaciones"], "c": 0},
    {"q": "Â¿QuiÃ©n enviÃ³ un manuscrito a Darwin que impulsÃ³ la publicaciÃ³n conjunta?", "a": ["Wallace", "Mendel", "Lamarck", "Lyell"], "c": 0},
    {"q": "Â¿QuÃ© postulado implica que no todos los individuos sobreviven y se reproducen?", "a": ["SobreproducciÃ³n", "VariaciÃ³n", "Herencia", "Equilibrio"], "c": 0},
    {"q": "La selecciÃ³n natural requiere que el rasgo seaâ€¦", "a": ["Heredable", "Adquirido por prÃ¡ctica", "Igual en todos", "SÃ³lo ambiental"], "c": 0},
    {"q": "La adaptaciÃ³n depende delâ€¦", "a": ["Ambiente especÃ­fico", "Azar total", "TamaÃ±o corporal", "Color por sÃ­ mismo"], "c": 0},
  ];
  const box = document.getElementById('quizBox');
  box.innerHTML = questions.map((o,i)=>`
    <div style="margin:.75rem 0">
      <div><strong>${i+1}.</strong> ${o.q}</div>
      ${o.a.map((opt,j)=>`
        <label style="display:block;margin:.25rem 0">
          <input type="radio" name="q${i}" value="${j}"> ${opt}
        </label>
      `).join('')}
    </div>
  `).join('');

  
  async function grade(){
    let correct = 0;
    questions.forEach((o,i)=>{
      const sel = document.querySelector('input[name="q'+i+'"]:checked');
      if(sel && parseInt(sel.value,10)===o.c) correct++;
    });
    const scoreText = `Puntaje: ${correct}/${questions.length}`;
    const scoreEl = document.getElementById('score');
    if(scoreEl) scoreEl.textContent = scoreText;

    // Enviar resultado al backend (Google Sheets) si hay sesiÃ³n y API disponible
    try{
      const u = (typeof getSession === 'function') ? getSession() : null;
      if(u && u.id && window.PEVE_API && typeof PEVE_API.pevePost === 'function'){
        await PEVE_API.pevePost('quiz_submit', {
          timestamp: new Date().toISOString(),
          userId: u.id,
          userName: u.name || '',
          course: 'BiologÃ­a 1M',
          module: 'OA2',
          score: correct,
          max: questions.length,
          q1: '',
          q2: ''
        });
        console.log('Intento de quiz registrado en Sheets para', u.id);
      }else{
        console.log('Quiz registrado sÃ³lo localmente (sin sesiÃ³n o sin API configurada).');
      }
    }catch(err){
      console.warn('No se pudo enviar el quiz a Sheets (quiz_submit).', err);
    }
  }

</script>
<script src="../../../../../assets/js/accesibilidad.js"></script></body>
</html>
