<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ğŸ§ª Quiz BiologÃ­a PEVE â€” 8Â° BÃ¡sico (OA2)</title>
<link href="../../../../../assets/css/style.css" rel="stylesheet"/>
<link href="../../../../../assets/css/peve-cards.css" rel="stylesheet"/>
<link href="../../../../../assets/logo.svg" rel="icon" type="image/svg+xml"/>

<script defer="" src="../../../../../assets/js/config.js"></script>
<script defer="" src="../../../../../assets/js/peve-backend.js"></script>
<link href="../../../../../assets/css/theme.css" rel="stylesheet"/></head>
<body class="theme-dark">
<header class="topbar">
<div class="topbar-left">
<div aria-hidden="true" class="logo-circle">ğŸ§¬</div>
<div class="brand-text">
<span class="brand-name" data-i18n="c.peve_a61b37fe">PEVE</span>
<span class="brand-subtitle" data-i18n="c.plataforma_de_exÃ¡menes_de_validaciÃ³n_de_e650314b">
          Plataforma de ExÃ¡menes de ValidaciÃ³n de Estudios
        </span>
</div>
</div>
<nav aria-label="NavegaciÃ³n principal" class="topbar-nav" data-i18n-aria-label="c.attr.aria-label.navegaciÃ³n_principal_86058c13">
<a class="nav-link" data-i18n="nav.inicio" href="../../../../../index.html">Inicio</a>
<a class="nav-link" data-i18n="nav.proceso" href="../../../../../pages/info.html">Proceso</a>
<a class="nav-link" data-i18n="nav.niveles" href="../../../../../pages/niveles.html">Niveles</a>
<a class="nav-link" data-i18n="nav.asignaturas" href="../../../../../pages/asignaturas.html">Asignaturas</a>
<a class="nav-link" data-i18n="nav.perfiles" href="../../../../../pages/perfiles.html">Perfiles</a>
<a class="nav-link" data-i18n="nav.accesibilidad" href="../../../../../pages/accesibilidad.html">Accesibilidad</a>
<a class="nav-link" data-i18n="nav.acerca" href="../../../../../pages/acerca.html">Acerca de</a>
</nav>
<div aria-label="Controles de accesibilidad" class="accessibility-toolbar" data-i18n-aria-label="c.attr.aria-label.controles_de_accesibilidad_e1513252">
<button class="access-btn" data-action="home" data-home="../../../../../index.html" data-i18n-title="c.attr.title.ir_al_inicio_115d499a" title="Ir al inicio">ğŸ </button>
<button class="access-btn" data-action="narrator" data-i18n-title="c.attr.title.leer_el_contenido_de_la_pÃ¡gina_b153cdac" title="Leer el contenido de la pÃ¡gina">ğŸ—£ï¸</button>
<button class="access-btn" data-action="toggle-theme" data-i18n-title="c.attr.title.cambiar_tema_clarooscuro_c39e5dae" title="Cambiar tema claro/oscuro">ğŸŒ“</button>
<button class="access-btn" data-action="font-inc" data-i18n-title="c.attr.title.aumentar_tamaÃ±o_de_letra_e7bb9209" title="Aumentar tamaÃ±o de letra">A+</button>
<button class="access-btn" data-action="font-dec" data-i18n-title="c.attr.title.disminuir_tamaÃ±o_de_letra_75a8c21b" title="Disminuir tamaÃ±o de letra">Aâˆ’</button>
<button class="access-btn" data-action="lang" data-i18n-title="c.attr.title.cambiar_idioma_esenfr_9e345c96" title="Cambiar idioma ES/EN/FR">ğŸŒ</button>
<button class="access-btn" data-action="guide" data-i18n-title="c.attr.title.mostrar_guÃ­a_paso_a_paso_c06bf245" title="Mostrar guÃ­a paso a paso">ğŸ§ </button>
<button class="access-btn" data-action="search" data-i18n-title="c.attr.title.buscar_en_esta_pÃ¡gina_90fa8efb" title="Buscar en esta pÃ¡gina">ğŸ”</button>
</div>
</header>
<main class="page-main" id="main-content">
<section class="section">
<header class="section-header">
<h1 data-i18n="p.content__8basico__cienciasnaturales__ciencias-naturales-biologia__quiz__quiz.0001">ğŸ§ª Quiz de prÃ¡ctica â€“ BiologÃ­a 8Â° bÃ¡sico (OA2)</h1>
<p>
          Responde estas preguntas de opciÃ³n mÃºltiple sobre
          <strong data-i18n="c.estructura_y_funciÃ³n_de_la_cÃ©lula_284923f6">estructura y funciÃ³n de la cÃ©lula</strong> (OA2). Al final podrÃ¡s
          ver tu puntaje y quÃ© Ã­tems necesitas revisar.
        </p>
</header>
<form class="quiz-form" id="quiz-form">
<div class="quiz-meta">
<div class="field-group">
<label data-i18n="p.content__8basico__cienciasnaturales__ciencias-naturales-biologia__quiz__quiz.0002" for="student-name">Nombre estudiante (opcional)</label>
<input data-i18n-placeholder="p.content__8basico__cienciasnaturales__ciencias-naturales-biologia__quiz__quiz.0003" id="student-name" name="studentName" placeholder="Se completarÃ¡ automÃ¡ticamente si vienes del login" type="text"/>
</div>
<div class="field-group">
<label data-i18n="c.curso__nivel_0352bab2" for="student-course">Curso / Nivel</label>
<input data-i18n-value="p.content__8basico__cienciasnaturales__ciencias-naturales-biologia__quiz__quiz.0004" id="student-course" name="studentCourse" type="text" value="8Â° BÃ¡sico"/>
</div>
</div>
<div class="quiz-items" id="quiz-items">
<!-- Preguntas via JS -->
</div>
<div class="quiz-actions">
<button class="btn btn-solid" data-i18n="c.enviar_respuestas_849cf6a5" type="submit">âœ… Enviar respuestas</button>
<button class="btn btn-outline" data-i18n="c.limpiar_intento_9c40ed82" id="reset-quiz" type="button">
            â™» Limpiar intento
          </button>
</div>
</form>
<section class="quiz-results" hidden="" id="quiz-results">
<h2 data-i18n="c.resultados_b164a1ab">Resultados</h2>
<p id="score-text"></p>
<table class="results-table">
<thead>
<tr>
<th>#</th>
<th data-i18n="c.oa__tema_1bbb1034">OA / Tema</th>
<th data-i18n="c.tu_respuesta_d731e738">Tu respuesta</th>
<th data-i18n="c.correcta_56b8d6b5">Correcta</th>
</tr>
</thead>
<tbody id="results-body"></tbody>
</table>
</section>
</section>
</main>
<footer class="footer small">
<div class="footer-inner">
<div class="footer-bar">
<div class="logo">
<img alt="Neotech EduLab" class="logo-img" data-i18n-alt="c.attr.alt.neotech_edulab_ef78e95d" onerror="this.style.display='none'" src="../../../../../assets/logo.svg"/>
<div><strong>Â© <strong data-i18n="c.neotech_edulab_985e1a35">Neotech EduLab</strong>-EducaciÃ³n Inmersiva</strong></div>
<small data-i18n="c.prohibida_su_copia_yo_reproducciÃ³n_d83cfd46">ğŸ› ï¸Prohibida su copia y/o reproducciÃ³n</small>
</div>
</div>
<div class="footer-text">
<p>
          Â© 2025 <strong data-i18n="c.peve_63155b10">ğŸ“šPEVE</strong> â€“ Plataforma de ExÃ¡menes de ValidaciÃ³n de
          Estudios Â· Hecho con â¤ï¸ y enfoque inclusivo.
        </p>
<p class="footer-note" data-i18n="c.peve_es_un_recurso_pedagÃ³gico_complement_a28eeb20">
          PEVE es un recurso pedagÃ³gico complementario. La inscripciÃ³n, rendiciÃ³n y
          certificaciÃ³n de ExÃ¡menes Libres depende exclusivamente del Ministerio de
          EducaciÃ³n de Chile y sus canales oficiales.
        </p>
</div>
</div>
</footer>
<script>
    const QUESTIONS = [
      {
        id: 1,
        oa: "OA2 â€“ CÃ©lula como unidad bÃ¡sica",
        prompt:
          "Â¿Por quÃ© se dice que la cÃ©lula es la unidad bÃ¡sica de los seres vivos?",
        options: [
          "Porque todas las cÃ©lulas son visibles a simple vista.",
          "Porque todas las funciones vitales ocurren en las cÃ©lulas.",
          "Porque solo las plantas tienen cÃ©lulas.",
          "Porque las cÃ©lulas solo sirven para reproducirse."
        ],
        answer: 1
      },
      {
        id: 2,
        oa: "OA2 â€“ OrgÃ¡nulos celulares",
        prompt:
          "Â¿QuÃ© orgÃ¡nulo se asocia principalmente con la producciÃ³n de energÃ­a (ATP) en la cÃ©lula?",
        options: [
          "Cloroplasto",
          "NÃºcleo",
          "Mitocondria",
          "Ribosoma"
        ],
        answer: 2
      },
      {
        id: 3,
        oa: "OA2 â€“ CÃ©lula vegetal vs animal",
        prompt:
          "Â¿CuÃ¡l de las siguientes estructuras estÃ¡ presente solo en las cÃ©lulas vegetales?",
        options: [
          "Membrana plasmÃ¡tica",
          "Pared celular",
          "Mitocondria",
          "NÃºcleo"
        ],
        answer: 1
      },
      {
        id: 4,
        oa: "OA2 â€“ Membrana plasmÃ¡tica",
        prompt:
          "La membrana plasmÃ¡tica se caracteriza por ser semipermeable. Esto significa que:",
        options: [
          "Deja pasar todas las sustancias sin control.",
          "No deja pasar ninguna sustancia.",
          "Permite el paso de algunas sustancias y regula su entrada y salida.",
          "Solo deja pasar sustancias sÃ³lidas."
        ],
        answer: 2
      },
      {
        id: 5,
        oa: "OA2 â€“ Niveles de organizaciÃ³n",
        prompt:
          "El orden correcto desde lo mÃ¡s pequeÃ±o a lo mÃ¡s complejo es:",
        options: [
          "Tejido â†’ CÃ©lula â†’ Ã“rgano â†’ Sistema",
          "CÃ©lula â†’ Tejido â†’ Ã“rgano â†’ Sistema",
          "Ã“rgano â†’ Sistema â†’ CÃ©lula â†’ Tejido",
          "Sistema â†’ Ã“rgano â†’ Tejido â†’ CÃ©lula"
        ],
        answer: 1
      }
    ];

    const quizContainer = document.getElementById("quiz-items");
    const form = document.getElementById("quiz-form");
    const resultsSection = document.getElementById("quiz-results");
    const resultsBody = document.getElementById("results-body");
    const scoreText = document.getElementById("score-text");
    const resetBtn = document.getElementById("reset-quiz");

    function getStudentContext() {
      const nameFromSession = sessionStorage.getItem("studentName") || "";
      const levelFromSession = sessionStorage.getItem("studentLevel") || "8Â° BÃ¡sico";
      return {
        name: nameFromSession,
        level: levelFromSession
      };
    }

    function renderQuiz() {
      const ctx = getStudentContext();
      const nameInput = document.getElementById("student-name");
      const courseInput = document.getElementById("student-course");
      if (ctx.name && nameInput && !nameInput.value) nameInput.value = ctx.name;
      if (ctx.level && courseInput && !courseInput.value) courseInput.value = ctx.level;

      quizContainer.innerHTML = "";
      QUESTIONS.forEach((q, idx) => {
        const block = document.createElement("article");
        block.className = "quiz-item";
        block.innerHTML = `
          <h3>Pregunta ${idx + 1} <small>(${q.oa})</small></h3>
          <p>${q.prompt}</p>
          <div class="quiz-options">
            ${q.options
              .map(
                (opt, i) => `
              <label class="quiz-option">
                <input type="radio" name="q${q.id}" value="${i}" required />
                <span>${opt}</span>
              </label>
            `
              )
              .join("")}
          </div>
        `;
        quizContainer.appendChild(block);
      });
    }

    form.addEventListener("submit", (ev) => {
      ev.preventDefault();
      const formData = new FormData(form);
      const ctx = getStudentContext();

      const nameInput = document.getElementById("student-name");
      const courseInput = document.getElementById("student-course");
      const name =
        (nameInput && nameInput.value.trim()) || ctx.name || "Estudiante PEVE";
      const course =
        (courseInput && courseInput.value.trim()) || ctx.level || "8Â° BÃ¡sico";

      let correct = 0;
      resultsBody.innerHTML = "";

      QUESTIONS.forEach((q, idx) => {
        const userAnswerStr = formData.get(`q${q.id}`);
        const userAnswer = userAnswerStr !== null ? parseInt(userAnswerStr, 10) : -1;
        const isCorrect = userAnswer === q.answer;
        if (isCorrect) correct++;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${idx + 1}</td>
          <td>${q.oa}</td>
          <td>${userAnswer >= 0 ? q.options[userAnswer] : "Sin respuesta"}</td>
          <td>${q.options[q.answer]}</td>
        `;
        if (!isCorrect) row.classList.add("row-incorrect");
        resultsBody.appendChild(row);
      });

      const scorePercent = Math.round((correct / QUESTIONS.length) * 100);
      scoreText.textContent = `Obtuviste ${correct} de ${
        QUESTIONS.length
      } respuestas correctas (${scorePercent}%).`;
      resultsSection.hidden = false;

      const payload = {
        name,
        course,
        score: correct,
        max: QUESTIONS.length,
        scorePercent,
        ts: new Date().toISOString()
      };

      try {
        const key = "peve_biologia8_oa2_quiz";
        const prev = JSON.parse(localStorage.getItem(key) || "[]");
        prev.push(payload);
        localStorage.setItem(key, JSON.stringify(prev));
      } catch (err) {
        console.warn("No se pudo guardar en localStorage", err);
      }

      if (window.PEVE_BACKEND) {
        window.PEVE_BACKEND
          .sendQuizResult({
            userName: name,
            course: course,
            module: "Ciencias Naturales 8Â° â€“ BiologÃ­a OA2",
            score: correct,
            max: QUESTIONS.length,
            q1: "BiologÃ­a 8Â°",
            q2: "OA2 â€“ Estructura y funciÃ³n celular"
          })
          .then((res) => {
            if (res && res.status === "ok") {
              console.log("[PEVE] Quiz BiologÃ­a OA2 enviado a Sheets");
            } else {
              console.warn(
                "[PEVE] No se pudo enviar quiz BiologÃ­a OA2 a Sheets",
                res
              );
            }
          })
          .catch((err) => {
            console.warn(
              "[PEVE] Error al enviar quiz BiologÃ­a OA2 a Sheets",
              err
            );
          });
      }
    });

    resetBtn.addEventListener("click", () => {
      form.reset();
      resultsSection.hidden = true;
    });

    renderQuiz();
  </script>
<script src="../../../../../assets/js/accessibility.js"></script></body>
</html>
