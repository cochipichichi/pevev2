<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŸï¸ Ticket de salida Historia 8Â° â€“ PEVE</title>
  <link rel="stylesheet" href="../../../../../assets/css/style.css">
  <link rel="stylesheet" href="../../../../../assets/css/peve-cards.css">
  <link rel="icon" type="image/svg+xml" href="../../../../../assets/logo.svg">
  <script src="../../../../../assets/js/accessibility.js" defer></script>
  <script src="../../../../../assets/js/config.js" defer></script>
  <script src="../../../../../assets/js/peve-backend.js" defer></script>
</head>
<body class="theme-dark">
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo-circle" aria-hidden="true">ğŸ“š</div>
      <div class="brand-text">
        <span class="brand-name">PEVE</span>
        <span class="brand-subtitle">Plataforma de ExÃ¡menes de ValidaciÃ³n de Estudios</span>
      </div>
    </div>
    <nav class="topbar-nav" aria-label="NavegaciÃ³n principal">
      <a href="../../../../../index.html" class="nav-link" data-i18n="nav.inicio">Inicio</a>
      <a href="../../../../../pages/info.html" class="nav-link" data-i18n="nav.proceso">Proceso</a>
      <a href="../../../../../pages/niveles.html" class="nav-link" data-i18n="nav.niveles">Niveles</a>
      <a href="../../../../../pages/asignaturas.html" class="nav-link" data-i18n="nav.asignaturas">Asignaturas</a>
      <a href="../../../../../pages/perfiles.html" class="nav-link" data-i18n="nav.perfiles">Perfiles</a>
      <a href="../../../../../pages/accesibilidad.html" class="nav-link" data-i18n="nav.accesibilidad">Accesibilidad</a>
      <a href="../../../../../pages/acerca.html" class="nav-link" data-i18n="nav.acerca">Acerca de</a>
    </nav>

    <div class="accessibility-toolbar" aria-label="Controles de accesibilidad">
      <button class="access-btn" data-action="home" data-home="../../../../../index.html" title="Ir al inicio">ğŸ </button>
      <button class="access-btn" data-action="narrator" title="Leer el contenido de la pÃ¡gina">ğŸ—£ï¸</button>
      <button class="access-btn" data-action="toggle-theme" title="Cambiar tema claro/oscuro">ğŸŒ“</button>
      <button class="access-btn" data-action="font-inc" title="Aumentar tamaÃ±o de letra">A+</button>
      <button class="access-btn" data-action="font-dec" title="Disminuir tamaÃ±o de letra">Aâˆ’</button>
      <button class="access-btn" data-action="lang" title="Cambiar idioma ES/EN/FR">ğŸŒ</button>
      <button class="access-btn" data-action="guide" title="Mostrar guÃ­a paso a paso">ğŸ§ </button>
      <button class="access-btn" data-action="search" title="Buscar en esta pÃ¡gina">ğŸ”</button>
    </div>
  </header>

<main id="main-content" class="page-main">
  <section class="section">
    <header class="section-header">
      <h1>ğŸŸï¸ Ticket de salida â€“ Historia y GeografÃ­a 8Â° bÃ¡sico</h1>
      <p>Completa este ticket al finalizar tu estudio o prÃ¡ctica. Puedes copiar tus respuestas y enviarlas por correo a tus profesores.</p>
    </header>

    <form id="ticket-form" class="ticket-form">
      <div class="ticket-grid">
        <label>
          Nombre del estudiante
          <input type="text" id="t-name" required />
        </label>
        <label>
          Curso
          <input type="text" id="t-course" placeholder="8Â° bÃ¡sico" />
        </label>
      </div>

      <label>
        1. Algo importante que aprendÃ­ hoy fue...
        <textarea id="t-q1" rows="3" required></textarea>
      </label>

      <label>
        2. Un concepto o proceso histÃ³rico/geogrÃ¡fico que todavÃ­a me cuesta es...
        <textarea id="t-q2" rows="3" required></textarea>
      </label>

      <label>
        3. Una pregunta que me gustarÃ­a hacerle a mi profesor/a es...
        <textarea id="t-q3" rows="3" required></textarea>
      </label>

      <label>
        4. Â¿QuÃ© estrategia me ayudÃ³ mÃ¡s a aprender hoy? (lectura guiada, mapa, quiz, etc.)
        <textarea id="t-q4" rows="3"></textarea>
      </label>

      <div class="ticket-actions">
        <button type="button" class="btn btn-solid" id="copy-ticket">ğŸ“‹ Copiar ticket</button>
        <a id="mail-ticket" class="btn btn-outline" href="#">âœ‰ Abrir correo con ticket</a>
      </div>

      <p class="ticket-note">
        Sugerencia: envÃ­a tu ticket a <strong>belenacuna@liceosannicolas.cl</strong> y <strong>franciscopinto@liceosannicolas.cl</strong> o al correo que acuerden en clase.
      </p>
    </form>
  </section>
</main>

  <footer class="footer small">
    <div class="footer-inner">
      <div class="footer-bar">
        <div class="logo">
          <img src="../../../../../assets/logo.svg" alt="Neotech EduLab" class="logo-img" onerror="this.style.display='none'">
          <div><strong>Â© <strong>Neotech EduLab</strong>-EducaciÃ³n Inmersiva</div>
          <small>ğŸ› ï¸Prohibida su copia y/o reproducciÃ³n</small>
        </div>
      </div>
      <div class="footer-text">
        <p>Â© 2025 <strong>ğŸ“šPEVE</strong> â€“ Plataforma de ExÃ¡menes de ValidaciÃ³n de Estudios Â· Hecho con â¤ï¸ y enfoque inclusivo.</p>
        <p class="footer-note">
          PEVE es un recurso pedagÃ³gico complementario. La inscripciÃ³n, rendiciÃ³n y certificaciÃ³n de ExÃ¡menes Libres
          depende exclusivamente del Ministerio de EducaciÃ³n de Chile y sus canales oficiales.
        </p>
      </div>
    </div>
  </footer>

<script>
function buildBody() {
  const name = document.getElementById("t-name").value || "";
  const course = document.getElementById("t-course").value || "";
  const q1 = document.getElementById("t-q1").value || "";
  const q2 = document.getElementById("t-q2").value || "";
  const q3 = document.getElementById("t-q3").value || "";
  const q4 = document.getElementById("t-q4").value || "";

  const lines = [];
  lines.push(`Nombre: ${name}`);
  lines.push(`Curso: ${course}`);
  lines.push("");
  lines.push("1. Algo importante que aprendÃ­ hoy fue:");
  lines.push(q1);
  lines.push("");
  lines.push("2. Un concepto o proceso histÃ³rico/geogrÃ¡fico que todavÃ­a me cuesta es:");
  lines.push(q2);
  lines.push("");
  lines.push("3. Una pregunta que me gustarÃ­a hacerle a mi profesor/a es:");
  lines.push(q3);
  lines.push("");
  lines.push("4. Estrategia que mÃ¡s me ayudÃ³ hoy:");
  lines.push(q4);
  return lines.join("\n");
}

document.getElementById("copy-ticket").addEventListener("click", async () => {
  const body = buildBody();
  try {
    await navigator.clipboard.writeText(body);
    alert("Ticket copiado al portapapeles. Pega el texto en tu correo o portafolio.");
  } catch (err) {
    alert("No se pudo copiar automÃ¡ticamente. Selecciona el texto y copia manualmente.");
  }
});

document.getElementById("mail-ticket").addEventListener("click", (e) => {
  const body = encodeURIComponent(buildBody());
  const subject = encodeURIComponent("Ticket de salida Historia 8Â° â€“ PEVE");
  const to = "belenacuna@liceosannicolas.cl,franciscopinto@liceosannicolas.cl";
  e.currentTarget.href = `mailto:${to}?subject=${subject}&body=${body}`;

  // AdemÃ¡s, enviar el ticket a Google Sheets vÃ­a Apps Script (demo)
  if (window.PEVE_BACKEND) {
    const name = document.getElementById("t-name").value || "";
    const course = document.getElementById("t-course").value || "8Â° bÃ¡sico";
    const learned = document.getElementById("t-q1").value || "";
    const doubt = document.getElementById("t-q2").value || "";
    const example = document.getElementById("t-q3").value || "";
    window.PEVE_BACKEND.sendTicket({
      userName: name,
      course,
      module: "Historia y GeografÃ­a 8Â° â€“ Ticket salida",
      learned,
      doubt,
      example
    }).then((res) => {
      if (res && res.status === "ok") {
        console.log("[PEVE] Ticket enviado a Sheets");
      } else {
        console.warn("[PEVE] No se pudo enviar ticket a Sheets", res);
      }
    }).catch((err) => {
      console.warn("[PEVE] Error al enviar ticket a Sheets", err);
    });
  }
});
</script>

</body>
</html>
